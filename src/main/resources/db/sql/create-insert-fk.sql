CREATE SCHEMA PUBLIC;

CREATE TABLE PUBLIC.ESTADOSEXAMENES ( 
	ID                   INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	DESCRIPCION          varchar(50)   NOT NULL,
	CONSTRAINT SYS_PK_10139 PRIMARY KEY ( ID )
 );

CREATE TABLE PUBLIC.ESTADOSMATERIAS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	DESCRIPCION          varchar(50)   NOT NULL,
	CONSTRAINT SYS_PK_10127 PRIMARY KEY ( ID )
 );

CREATE TABLE PUBLIC.ESTADOSUSUARIOS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	DESCRIPCION          varchar(50)   NOT NULL,
	CONSTRAINT SYS_PK_10110 PRIMARY KEY ( ID )
 );

CREATE TABLE PUBLIC.ROLES ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) NOT NULL,
	DESCRIPCION          varchar(50)   NOT NULL,
	CONSTRAINT SYS_PK_10104 PRIMARY KEY ( ID )
 );

CREATE TABLE PUBLIC.TIPOSRESPUESTAS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	DESCRIPCION          varchar(50)   ,
	CONSTRAINT PK_TIPOSRESPUESTAS PRIMARY KEY ( ID )
 );

CREATE TABLE PUBLIC.USUARIOS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	EMAIL                varchar(255)   NOT NULL,
	PASSWORD             varchar(255)   NOT NULL,
	APELLIDO             varchar(255)   NOT NULL,
	NOMBRE               varchar(255)   NOT NULL,
	IDESTADOUSUARIO      integer   NOT NULL,
	CONSTRAINT SYS_PK_10092 PRIMARY KEY ( ID )
 );

CREATE INDEX IDX_USUARIOS ON PUBLIC.USUARIOS ( IDESTADOUSUARIO );

CREATE TABLE PUBLIC.MATERIAS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	NOMBRE               varchar(255)   NOT NULL,
	IDDOCENTETITULAR     integer   NOT NULL,
	IDESTADOMATERIA      integer   NOT NULL,
	CONSTRAINT SYS_PK_10121 PRIMARY KEY ( ID )
 );

CREATE INDEX IDX_MATERIAS ON PUBLIC.MATERIAS ( IDESTADOMATERIA );

CREATE INDEX IDX_MATERIAS_0 ON PUBLIC.MATERIAS ( IDDOCENTETITULAR );

CREATE TABLE PUBLIC.ROLESUSUARIOS ( 
	IDUSUARIO            integer   NOT NULL,
	IDROL                integer   NOT NULL
 );

CREATE INDEX IDX_ROLESUSUARIOS ON PUBLIC.ROLESUSUARIOS ( IDROL );

CREATE INDEX IDX_ROLESUSUARIOS_0 ON PUBLIC.ROLESUSUARIOS ( IDUSUARIO );

CREATE TABLE PUBLIC.EXAMENES ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	NOMBRE               varchar(255)   NOT NULL,
	IDMATERIA            integer   NOT NULL,
	IDESTADOEXAMEN       integer   NOT NULL,
	CONSTRAINT SYS_PK_10133 PRIMARY KEY ( ID )
 );

CREATE INDEX IDX_EXAMENES ON PUBLIC.EXAMENES ( IDESTADOEXAMEN );

CREATE INDEX IDX_EXAMENES_0 ON PUBLIC.EXAMENES ( IDMATERIA );

CREATE TABLE PUBLIC.MATERIAALUMNO ( 
	IDALUMNO             integer   NOT NULL,
	IDMATERIA            integer   
 );

CREATE INDEX IDX_MATERIAALUMNO ON PUBLIC.MATERIAALUMNO ( IDALUMNO );

CREATE INDEX IDX_MATERIAALUMNO_0 ON PUBLIC.MATERIAALUMNO ( IDMATERIA );

CREATE TABLE PUBLIC.PREGUNTAS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	IDEXAMEN             integer   NOT NULL,
	PREGUNTA             varchar(255)   NOT NULL,
	CONSTRAINT SYS_PK_10145 PRIMARY KEY ( ID )
 );

CREATE INDEX IDX_PREGUNTAS ON PUBLIC.PREGUNTAS ( IDEXAMEN );

CREATE TABLE PUBLIC.RESPUESTAS ( 
	ID                   integer GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1)  NOT NULL,
	IDPREGUNTA           integer   NOT NULL,
	RESPUESTA            varchar(255)   NOT NULL,
	IDTIPORESPUESTA      integer   NOT NULL,
	CONSTRAINT SYS_PK_10153 PRIMARY KEY ( ID )
 );

CREATE INDEX IDX_RESPUESTAS ON PUBLIC.RESPUESTAS ( IDPREGUNTA );

CREATE INDEX IDX_RESPUESTAS_0 ON PUBLIC.RESPUESTAS ( IDTIPORESPUESTA );

ALTER TABLE PUBLIC.EXAMENES ADD CONSTRAINT FK_EXAMENES FOREIGN KEY ( IDESTADOEXAMEN ) REFERENCES PUBLIC.ESTADOSEXAMENES( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.EXAMENES ADD CONSTRAINT FK_EXAMENES_0 FOREIGN KEY ( IDMATERIA ) REFERENCES PUBLIC.MATERIAS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.MATERIAALUMNO ADD CONSTRAINT FK_MATERIAALUMNO FOREIGN KEY ( IDALUMNO ) REFERENCES PUBLIC.USUARIOS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.MATERIAALUMNO ADD CONSTRAINT FK_MATERIAALUMNO_0 FOREIGN KEY ( IDMATERIA ) REFERENCES PUBLIC.MATERIAS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.MATERIAS ADD CONSTRAINT FK_MATERIAS FOREIGN KEY ( IDESTADOMATERIA ) REFERENCES PUBLIC.ESTADOSMATERIAS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.MATERIAS ADD CONSTRAINT FK_MATERIAS_0 FOREIGN KEY ( IDDOCENTETITULAR ) REFERENCES PUBLIC.USUARIOS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.PREGUNTAS ADD CONSTRAINT FK_PREGUNTAS FOREIGN KEY ( IDEXAMEN ) REFERENCES PUBLIC.EXAMENES( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.RESPUESTAS ADD CONSTRAINT FK_RESPUESTAS FOREIGN KEY ( IDPREGUNTA ) REFERENCES PUBLIC.PREGUNTAS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.RESPUESTAS ADD CONSTRAINT FK_RESPUESTAS_0 FOREIGN KEY ( IDTIPORESPUESTA ) REFERENCES PUBLIC.TIPOSRESPUESTAS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.ROLESUSUARIOS ADD CONSTRAINT FK_ROLESUSUARIOS FOREIGN KEY ( IDROL ) REFERENCES PUBLIC.ROLES( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.ROLESUSUARIOS ADD CONSTRAINT FK_ROLESUSUARIOS_0 FOREIGN KEY ( IDUSUARIO ) REFERENCES PUBLIC.USUARIOS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

ALTER TABLE PUBLIC.USUARIOS ADD CONSTRAINT FK_USUARIOS FOREIGN KEY ( IDESTADOUSUARIO ) REFERENCES PUBLIC.ESTADOSUSUARIOS( ID ) ON DELETE NO ACTION ON UPDATE NO ACTION;

INSERT INTO PUBLIC.ESTADOSEXAMENES(DESCRIPCION ) VALUES ('Pendiente' ); 
INSERT INTO PUBLIC.ESTADOSEXAMENES(DESCRIPCION ) VALUES ('Examen en curso' ); 
INSERT INTO PUBLIC.ESTADOSEXAMENES(DESCRIPCION ) VALUES ('Examen finalizado' ); 

INSERT INTO PUBLIC.ESTADOSMATERIAS(DESCRIPCION ) VALUES ('Materia Habilitada' ); 
INSERT INTO PUBLIC.ESTADOSMATERIAS(DESCRIPCION ) VALUES ('Materia Eliminada' ); 

INSERT INTO PUBLIC.ESTADOSUSUARIOS(DESCRIPCION ) VALUES ('Pendiente Habilitación' ); 
INSERT INTO PUBLIC.ESTADOSUSUARIOS(DESCRIPCION ) VALUES ('Habilitado' ); 
INSERT INTO PUBLIC.ESTADOSUSUARIOS(DESCRIPCION ) VALUES ('Habilitación Rechazada' ); 
INSERT INTO PUBLIC.ESTADOSUSUARIOS(DESCRIPCION ) VALUES ( 'Eliminado' ); 

INSERT INTO PUBLIC.ROLES(DESCRIPCION ) VALUES ('Administrador' ); 
INSERT INTO PUBLIC.ROLES(DESCRIPCION ) VALUES ('Docente' ); 
INSERT INTO PUBLIC.ROLES(DESCRIPCION ) VALUES ('Alumno' ); 

INSERT INTO PUBLIC.TIPOSRESPUESTAS(DESCRIPCION ) VALUES ('Repuesta Correcta' ); 
INSERT INTO PUBLIC.TIPOSRESPUESTAS(DESCRIPCION ) VALUES ('Repuesta Incorrecta' ); 

INSERT INTO PUBLIC.USUARIOS(EMAIL, PASSWORD, APELLIDO, NOMBRE, IDESTADOUSUARIO ) VALUES ('cgioia@unlam.edu.ar', '1234', 'Gioia', 'Cintia', 2 ); 
INSERT INTO PUBLIC.USUARIOS(EMAIL, PASSWORD, APELLIDO, NOMBRE, IDESTADOUSUARIO ) VALUES ('wureta@unlam.edu.ar', '1234', 'Ureta', 'Walter', 2 ); 
INSERT INTO PUBLIC.USUARIOS(EMAIL, PASSWORD, APELLIDO, NOMBRE, IDESTADOUSUARIO ) VALUES ('aborgeat@unlam.edu.ar', '1234', 'Borgeat', 'Andres', 2 ); 
INSERT INTO PUBLIC.USUARIOS(EMAIL, PASSWORD, APELLIDO, NOMBRE, IDESTADOUSUARIO ) VALUES ('jmonteagudo@unlam.edu.ar', '1234', 'Monteagudo', 'Juan', 2 ); 

INSERT INTO PUBLIC.MATERIAS(NOMBRE, IDDOCENTETITULAR, IDESTADOMATERIA ) VALUES ('Seguridad y Calidad en Aplicaciones Web', 2, 1 ); 

INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 1, 1 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 1, 2 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 2, 1 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 2, 2 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 3, 1 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 3, 2 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 3, 3 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 4, 1 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 4, 2 ); 
INSERT INTO PUBLIC.ROLESUSUARIOS(IDUSUARIO, IDROL ) VALUES ( 4, 3 ); 

INSERT INTO PUBLIC.EXAMENES(NOMBRE, IDMATERIA, IDESTADOEXAMEN ) VALUES ('2017-1C 1er Parcial', 1, 1 ); 

INSERT INTO PUBLIC.PREGUNTAS(IDEXAMEN, PREGUNTA ) VALUES (1, 'Información cambia el estado de ... del sujeto o sistema que lo recibe' ); 
INSERT INTO PUBLIC.PREGUNTAS(IDEXAMEN, PREGUNTA ) VALUES (1, 'Información es:' ); 
INSERT INTO PUBLIC.PREGUNTAS(IDEXAMEN, PREGUNTA ) VALUES (1, 'Contenedores de información pueden ser:' ); 
INSERT INTO PUBLIC.PREGUNTAS(IDEXAMEN, PREGUNTA ) VALUES (1, 'Seguridad es una sensación' ); 
INSERT INTO PUBLIC.PREGUNTAS(IDEXAMEN, PREGUNTA ) VALUES (1, 'Tiangulo ...' ); 

INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (1, 'Conocimiento', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (1, 'Enamoramiento', 2 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (2, 'Critica', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (2, 'Valiosa', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (2, 'Sensitiva', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (2, 'Adictiva', 2 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (3, 'Lindos', 2 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (3, 'Feos', 2 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (3, 'Sistemas Aislados', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (3, 'Sistema Interconectados', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (4, 'Verdadero', 1 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (4, 'Falso', 2 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (5, 'Bermudas', 2 ); 
INSERT INTO PUBLIC.RESPUESTAS(IDPREGUNTA, RESPUESTA, IDTIPORESPUESTA ) VALUES (5, 'ID', 1 ); 

